# DCTCP

## 概述

DCTCP是一种用于数据中心网络的类似TCP的协议（DCTCP），它扩展了TCP的拥塞控制算法，在交换机中使用显式拥塞通知（ECN）来检测并响应网络拥塞。

注：数据中心的目标如下：使用低成本组件构建高可用性、高性能的计算和存储基础架构；专注于应用产生的短流（short flows）和长流（long flows）的各种组合，保障短流的低延迟（通过控制交换机队列的已占用长度），高突发容忍性以及长流的带宽高利用率。

## 算法 

DCTCP算法包含三个主要组成部分：

* 用于进行拥塞标记的交换机：DCTCP使用一种简单的主动队列管理方案，它只有一个参数，标记阈值K。如果到达队列的队列占用大于K，则使用CE代码点标记到达的数据包。否则，它不会被标记。该机制能够使得源端很快地被通知到队列溢出，同时该方案可以适用于已有的方案RED标记方案。
* 发送ECN-Echo的接收者：DCTCP接收方和TCP接收方之间的唯一区别是CE代码点中的信息传递回发送方的方式。DCTCP接收方尝试将标记的数据包的确切序列号传达回发送者，使用延迟ACK消息将一串连续的标记ECN的数据包情况返回给发送者。
* 控制拥塞窗口的发送者：发送方维护标记ECN数据包的比例的估计值，α，该值针对每个数据窗口（大约一个RTT）更新一次，如下式：

α = （1-g）* α + g * F

F是上一个窗口中标记ECN数据包的比例。DCTCP发送方和TCP发送方之间的唯一区别在于，它们各自对接收到带有ECN-Echo标志设置的ACK的反应。DCTCP使用下面的公式来更新拥塞窗口

cwnd = cwnd * (1-α/2)

## 注：Partition/Aggregate设计模式

分区/聚合设计模式（Partition/Aggregate design pattern）是许多大规模Web应用程序的基础。来自应用程序较高层的请求被分解为多个部分，并提供给较低层的工作节点，这些工作节点的反应汇总起来就产生了结果。

## Incast

Incast是一种多对一的通信模式。在这种模式下，多个发送者同时向单个接受者发送数据块。当同时发送足够多的数据，很容易造成接收方以太网交换机的缓冲过载，使得接收方无法正常接收数据。 Incast问题与以太网交换机的有限缓冲区大小，TCP丢失恢复机制和数据中心应用的业务模式都有关系。当来自多个服务器的并发流耗尽交换机的缓冲区时，将导致分组丢失或 TCP超时，TCP超时使得网络上微秒级的往返延时变成几百毫秒级的延迟，因此接收方应用层所能够感知的吞吐量要比链路容量低几个数量级，即TCP吞吐量崩溃了。这种Incast问题在数据中心的多个应用和业务中都可能产生，典型例子有基于集群的存储系统，Web搜索，MapReduce批处理工作等。



参考：https://blog.csdn.net/xiaoxiongdan_3/article/details/106788855
